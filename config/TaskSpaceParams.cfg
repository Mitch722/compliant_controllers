# Dynamic reconfigure parameters for joint-space compliant controller

PACKAGE='compliant_controllers'

from driver_base.msg import SensorLevels
from dynamic_reconfigure.parameter_generator_catkin import *

gen = ParameterGenerator()

kj = gen.add_group("Kj") # Joint stiffness
kj.add("j_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 0", 4000, 2000, 9000)
kj.add("j_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 1", 4000, 2000, 9000)
kj.add("j_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 2", 4000, 2000, 9000)
kj.add("j_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 3", 4000, 2000, 9000)
kj.add("j_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 4", 3500, 2000, 9000)
kj.add("j_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 5", 3500, 2000, 9000)
kj.add("j_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness for joint 6", 3500, 2000, 9000)

b = gen.add_group("B") # Rotor inertia
b.add("b_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 0", 0.3,  0.05, 0.5)
b.add("b_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 1", 0.3,  0.05, 0.5)
b.add("b_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 2", 0.3,  0.05, 0.5)
b.add("b_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 3", 0.3,  0.05, 0.5)
b.add("b_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 4", 0.18, 0.05, 0.5)
b.add("b_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 5", 0.18, 0.05, 0.5)
b.add("b_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Rotor inertia for joint 6", 0.18, 0.05, 0.5)

kp = gen.add_group("Kp") # Task space Stiffness gain
kp.add("k_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee translation x", 300, 20, 1000)
kp.add("k_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee translation y", 300, 20, 1000)
kp.add("k_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee translation z", 300, 20, 1000)
kp.add("k_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee rotation x", 100, 1, 100)
kp.add("k_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee rotation y", 100, 1, 100)
kp.add("k_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for ee rotation z", 100, 1, 100)

kd = gen.add_group("Kd") # Task space Damping gain
kd.add("d_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 0",  3.0, 0.0, 20)
kd.add("d_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 1",  3.0, 0.0, 20)
kd.add("d_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 2",  3.0, 0.0, 20)
kd.add("d_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 3",  3.0, 0.0, 20)
kd.add("d_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 4",  3.0, 0.0, 20)
kd.add("d_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Task Damping gain for joint 5",  3.0, 0.0, 20)

jkp = gen.add_group("JKp") # Joint Stiffness gain
jkp.add("jk_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 0", 5.1, 0, 10)
jkp.add("jk_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 1", 4.4, 0, 10)
jkp.add("jk_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 2", 3.8, 0, 10)
jkp.add("jk_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 3", 3.0, 0, 10)
jkp.add("jk_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 4", 1.1, 0, 10)
jkp.add("jk_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 5", 1.0, 0, 10)
jkp.add("jk_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Stiffness gain for joint 6", 1.0, 0, 10)

jkd = gen.add_group("JKd") # Joint space Damping gain
jkd.add("jd_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 0",  3.0, 1, 10)
jkd.add("jd_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 1",  3.0, 1, 10)
jkd.add("jd_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 2",  3.0, 1, 10)
jkd.add("jd_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 3",  3.0, 1, 10)
jkd.add("jd_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 4",  3.0, 1, 10)
jkd.add("jd_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 5",  3.0, 1, 10)
jkd.add("jd_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Damping gain for joint 6",  3.0, 1, 10)

l = gen.add_group("L") # Friction observer gain
l.add("l_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 0", 20, 20, 200)
l.add("l_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 1", 20, 20, 200)
l.add("l_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 2", 20, 20, 200)
l.add("l_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 3", 20, 20, 200)
l.add("l_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 4", 20, 20, 200)
l.add("l_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 5", 20, 20, 200)
l.add("l_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer gain for joint 6", 20, 20, 200)

lp = gen.add_group("Lp") # Friction observer proportional gain
lp.add("lp_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 0", 20, 1, 30)
lp.add("lp_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 1", 20, 1, 30)
lp.add("lp_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 2", 20, 1, 30)
lp.add("lp_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 3", 20, 1, 30)
lp.add("lp_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 4", 15, 1, 30)
lp.add("lp_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 5", 15, 1, 30)
lp.add("lp_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer proportional gain for joint 6", 15, 1, 30)

li = gen.add_group("Li") # Friction observer integral gain -- must be less than 0.5 * Lp^2
li.add("li_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 0", 0.0, 0, 400.0)
li.add("li_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 1", 0.0, 0, 400.0)
li.add("li_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 2", 0.0, 0, 400.0)
li.add("li_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 3", 0.0, 0, 400.0)
li.add("li_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 4", 0.0, 0, 400.0)
li.add("li_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 5", 0.0, 0, 400.0)
li.add("li_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer integral gain for joint 6", 0.0, 0, 400.0)

e_max = gen.add_group("E_max") # Friction observer maximum joint error
e_max.add("e_max_0", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 0", 0.5, 0, 1.0)
e_max.add("e_max_1", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 1", 0.5, 0, 1.0)
e_max.add("e_max_2", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 2", 0.5, 0, 1.0)
e_max.add("e_max_3", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 3", 0.5, 0, 1.0)
e_max.add("e_max_4", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 4", 0.5, 0, 1.0)
e_max.add("e_max_5", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 5", 0.5, 0, 1.0)
e_max.add("e_max_6", double_t, SensorLevels.RECONFIGURE_RUNNING, "Friction observer max joint error for joint 6", 0.5, 0, 1.0)


exit(gen.generate(PACKAGE, "task_space_compliance", "TaskSpaceCompliantController"))
